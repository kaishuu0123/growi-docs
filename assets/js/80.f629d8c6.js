(window.webpackJsonp=window.webpackJsonp||[]).push([[80],{255:function(e,t,a){"use strict";a.r(t);var r=a(20),o=Object(r.a)({},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"docker-compose"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose","aria-hidden":"true"}},[e._v("#")]),e._v(" docker-compose")]),e._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#概要"}},[e._v("概要")])]),a("li",[a("a",{attrs:{href:"#growi-docker-compose-のダウンロード"}},[e._v("growi-docker-compose　のダウンロード")])]),a("li",[a("a",{attrs:{href:"#growi-の起動確認"}},[e._v("GROWI の起動確認")])]),a("li",[a("a",{attrs:{href:"#localhost-以外からのアクセス"}},[e._v("localhost 以外からのアクセス")])]),a("li",[a("a",{attrs:{href:"#elasticsearch-のメモリ容量を変更"}},[e._v("Elasticsearch のメモリ容量を変更")])]),a("li",[a("a",{attrs:{href:"#growi-のアップグレード"}},[e._v("GROWI のアップグレード")])]),a("li",[a("a",{attrs:{href:"#関連ページ"}},[e._v("関連ページ")])])])]),a("p"),e._v(" "),a("h2",{attrs:{id:"概要"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#概要","aria-hidden":"true"}},[e._v("#")]),e._v(" 概要")]),e._v(" "),a("p",[e._v("この章では docker-compose を用いて GROWI を立ち上げる方法を紹介します。")]),e._v(" "),a("p",[e._v("セットアップには以下のソフトウェアが必要となるため、事前にインストールしてください。")]),e._v(" "),a("ul",[a("li",[e._v("Docker")]),e._v(" "),a("li",[e._v("docker-compose")])]),e._v(" "),a("h2",{attrs:{id:"growi-docker-compose-のダウンロード"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#growi-docker-compose-のダウンロード","aria-hidden":"true"}},[e._v("#")]),e._v(" growi-docker-compose　のダウンロード")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/weseek/growi-docker-compose",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/weseek/growi-docker-compose"),a("OutboundLink")],1),e._v(" の「Clone or download」ボタンから、ソースコードをダウンロードもしくは git コマンドにより clone します。")]),e._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("git clone https://github.com/weseek/growi-docker-compose.git growi\n")])])]),a("h2",{attrs:{id:"growi-の起動確認"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#growi-の起動確認","aria-hidden":"true"}},[e._v("#")]),e._v(" GROWI の起動確認")]),e._v(" "),a("p",[e._v("ダウンロードしたフォルダ内にて以下のコマンドを実行します。")]),e._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("cd growi\ndocker-compose up\n")])])]),a("p",[a("code",[e._v("http://localhost:3000/")]),e._v(" にアクセスし、初回セットアップ画面("),a("code",[e._v("/installer")]),e._v(")の表示が確認できれば GROWI 起動完了です。")]),e._v(" "),a("h2",{attrs:{id:"localhost-以外からのアクセス"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#localhost-以外からのアクセス","aria-hidden":"true"}},[e._v("#")]),e._v(" localhost 以外からのアクセス")]),e._v(" "),a("p",[a("code",[e._v("docker-compose.yml")]),e._v(" ファイル内の "),a("code",[e._v("ports")]),e._v(" を変更することで "),a("code",[e._v("localhost")]),e._v(" 以外からのアクセスを許可することができます。")]),e._v(" "),a("p",[e._v("変更前")]),e._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("services:\n  app:\n    ports:\n      - 127.0.0.1:3000:3000\n")])])]),a("p",[e._v("変更後")]),e._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("services:\n  app:\n    ports:\n      - 3000:3000\n")])])]),a("h2",{attrs:{id:"elasticsearch-のメモリ容量を変更"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#elasticsearch-のメモリ容量を変更","aria-hidden":"true"}},[e._v("#")]),e._v(" Elasticsearch のメモリ容量を変更")]),e._v(" "),a("p",[e._v("メモリに十分な空き容量がある場合、"),a("code",[e._v("docker-compose.yml")]),e._v(" ファイル内の "),a("code",[e._v("ES_JAVA_OPTS")]),e._v(" の値を変更することで、Elasticsearch のヒープ領域を増やすことができます。")]),e._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('environment:\n  - "ES_JAVA_OPTS=-Xms2g -Xmx2g"\n')])])]),a("h2",{attrs:{id:"growi-のアップグレード"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#growi-のアップグレード","aria-hidden":"true"}},[e._v("#")]),e._v(" GROWI のアップグレード")]),e._v(" "),a("h3",{attrs:{id:"growi-を-v3-4-x-にアップグレードする"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#growi-を-v3-4-x-にアップグレードする","aria-hidden":"true"}},[e._v("#")]),e._v(" GROWI を v3.4.x にアップグレードする")]),e._v(" "),a("p",[e._v("以下のページで、v3.3.x 以下の GROWI を利用してる人向けに v3.4.x へのアップグレードの手順を説明しています。")]),e._v(" "),a("p",[a("router-link",{attrs:{to:"./../upgrading/34x.html"}},[e._v("GROWI v3.4.x へのアップグレード")])],1),e._v(" "),a("h3",{attrs:{id:"コンテナのアップグレード"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#コンテナのアップグレード","aria-hidden":"true"}},[e._v("#")]),e._v(" コンテナのアップグレード")]),e._v(" "),a("p",[a("code",[e._v("growi-docker-compose")]),e._v(" をダウンロードしたフォルダにて、コンテナを停止します。")]),e._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("cd growi\ndocker-compose stop\n")])])]),a("p",[e._v("既存の Docker コンテナと Docker イメージを削除します。")]),e._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("docker-compose rm app mongo elasticseach\ndocker rmi weseek/growi:3\n")])])]),a("p",[e._v("最新版を pull し、Docker イメージを作成した後、コンテナを立ち上げます。")]),e._v(" "),a("div",{staticClass:"language-text extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("git pull\ndocker-compose build\ndocker-compose up\n")])])]),a("p",[e._v("起動後、GROWI App の管理画面の全文検索管理ページ( "),a("code",[e._v("/admin/search")]),e._v(" )で、インデックスを再構築してください。")]),e._v(" "),a("h2",{attrs:{id:"関連ページ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#関連ページ","aria-hidden":"true"}},[e._v("#")]),e._v(" 関連ページ")]),e._v(" "),a("ul",[a("li",[e._v("複数の GROWI を立ち上げる")])]),e._v(" "),a("p",[a("router-link",{attrs:{to:"./../admin-cookbook/multi-app.html"}},[e._v("growi-docker-compose Multiple Sites Example を利用した複数 app の起動手順")])],1),e._v(" "),a("ul",[a("li",[e._v("HTTPS プロキシを利用する")])]),e._v(" "),a("p",[a("router-link",{attrs:{to:"./../admin-cookbook/lets-encrypt.html"}},[e._v("growi-docker-compose with HTTPS proxy Example を利用した HTTPS プロキシの利用手順")])],1),e._v(" "),a("ul",[a("li",[e._v("MongoDB にページデータとユーザーデータのバックアップをとる")])]),e._v(" "),a("p",[a("router-link",{attrs:{to:"./../admin-cookbook/mongodb-backup-regular.html#manage-with-docker-compose"}},[e._v("growi-docker-compose with backup MongoDB container example を利用した MongoDB へのバックアップ作成手順")])],1),e._v(" "),a("ul",[a("li",[e._v("HackMD による複数人同時編集機能を利用する")])]),e._v(" "),a("p",[a("router-link",{attrs:{to:"./../admin-cookbook/integrate-with-hackmd.html#既存の-hackmd-codimd-と連携する"}},[e._v("HackMD(CodiMD) Integration Example を利用した HackMD 統合")])],1)])},[],!1,null,null,null);o.options.__file="docker-compose.md";t.default=o.exports}}]);